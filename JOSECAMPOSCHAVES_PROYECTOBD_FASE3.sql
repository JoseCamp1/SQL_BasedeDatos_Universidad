--PROYECTO F3
--MODULO:BASE DE DATOS
--PROFESOR:LUIS_ALONSO_BOGANTES_RODRIGUEZ
--ESTUDIANTE:JOSE_CAMPOS_CHAVES

--***BORRAR LA BASE DE DATOS***
--DROP DATABASE PROYECTO

--SE CREA LA BASE DE DATOS
CREATE DATABASE PROYECTOF3
GO
--SE USA LA BD
USE PROYECTOF3
GO
--SE CREAN LAS TABLAS
CREATE TABLE ESTUDIANTES(
ID_ESTUDIANTE varchar(9) NOT NULL,
NOMBRE_ESTUDIANTE varchar(25) NOT NULL,
APELLIDO1_ESTUDIANTE varchar(20) NOT NULL,
APELLIDO2_ESTUDIANTE varchar(20) NOT NULL,
TELEFONO_ESTUDIANTE varchar(8) NULL,
CORREO_ESTUDIANTE varchar(30) NULL,
PROVINCIA_ESTUDIANTE varchar(10) NOT NULL,
CANTON_ESTUDIANTE varchar(25) NOT NULL,
DISTRITO_ESTUDIANTE varchar(25) NOT NULL,
FECHA_INGRESO_ESTUDIANTE date CONSTRAINT DF_FECHA_INGRESO_ESTUDIANTE DEFAULT getdate() NULL,
ESTADO_ESTUDIANTE varchar(3)  CONSTRAINT DF_ESTADO_ESTUDIANTE_ESTADO DEFAULT 'ACT' NULL,	
BORRADO_E bit CONSTRAINT DF_BORRADO_E DEFAULT 0 NULL
);
--DROP TABLE ESTUDIANTES
--RESTRICCIONES ESTUDIANTES
ALTER TABLE ESTUDIANTES
	ADD CONSTRAINT PK_ESTUDIANTES PRIMARY KEY (ID_ESTUDIANTE);

ALTER TABLE ESTUDIANTES
	ADD CONSTRAINT CK_ESTADO_ESTUDIANTE CHECK(ESTADO_ESTUDIANTE IN ('ACT','INA') AND ESTADO_ESTUDIANTE = upper(ESTADO_ESTUDIANTE));

ALTER TABLE ESTUDIANTES
	ADD CONSTRAINT CK_PROVINCIA_ESTUDIANTE CHECK(PROVINCIA_ESTUDIANTE IN ('SAN JOSE', 'ALAJUELA', 'HEREDIA', 'CARTAGO','LIMON','PUNTARENAS','GUANACASTE') AND PROVINCIA_ESTUDIANTE = upper(PROVINCIA_ESTUDIANTE));



CREATE TABLE PROFESORES(
ID_PROFESOR varchar(9) NOT NULL,
NOMBRE_PROFESOR varchar(25) NOT NULL,
APELLIDO1_PROFESOR varchar(20) NOT NULL,
APELLIDO2_PROFESOR varchar(20) NOT NULL,
TELFONO_PROFESOR varchar(8) NULL,
CORREO_PROFESOR varchar(25) NULL,
BORRADO_P bit CONSTRAINT DF_BORRADO_P DEFAULT 0 NULL
);
--RESTRICCIONES PROFESORES
ALTER TABLE PROFESORES
	ADD CONSTRAINT PK_PROFESORES PRIMARY KEY(ID_PROFESOR);

CREATE TABLE PROGRAMAS(
COD_PROGRAMA int IDENTITY (1,1),
NOMBRE_PROGRAMA varchar(100) NOT NULL
);
--DROP TABLE PROGRAMAS

--RESTRICCIONES PROGRAMAS
ALTER TABLE PROGRAMAS
	ADD CONSTRAINT PK_PROGRAMAS PRIMARY KEY(COD_PROGRAMA);

CREATE TABLE MODULOS(
COD_MODULO int IDENTITY (1,1),
NOMBRE_MODULO varchar(100) NOT NULL,
HORAS_TOTALES int NOT NULL,
COSTO decimal(8,2) NOT NULL
);
--RESTRICCIONES MODULOS
ALTER TABLE MODULOS
	ADD CONSTRAINT PK_MODULOS PRIMARY KEY(COD_MODULO);

ALTER TABLE MODULOS
	ADD CONSTRAINT CK_COSTO CHECK(COSTO>0)

CREATE TABLE CERTIFICACIONES_PROFESORES(
COD_CERTIFICACION int IDENTITY (1,1),
ID_PROFESOR varchar(9) NOT NULL,
NOMBRE_CERTIFICACION varchar(100) NOT NULL
);
--RESTRICCIONES CERTIFICACIONES_PROFESORES
ALTER TABLE CERTIFICACIONES_PROFESORES
	ADD CONSTRAINT PK_CERTIFICACIONES_PROFESORES PRIMARY KEY(COD_CERTIFICACION);

ALTER TABLE CERTIFICACIONES_PROFESORES
	ADD CONSTRAINT FK_CERTIFICACIONES_PROFESORES_ID_PROFESOR FOREIGN KEY (ID_PROFESOR)REFERENCES PROFESORES(ID_PROFESOR)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

CREATE TABLE MODULOS_PROGRAMAS(
COD_MODULO_PROGRAMA int IDENTITY (1,1),
COD_PROGRAMA int NOT NULL,
COD_MODULO int NOT NULL,
REQUISITO int CONSTRAINT DF_REQUISITO DEFAULT 0 NULL
);
--RESTRICCIONES MODULOS_PROGRAMAS
ALTER TABLE MODULOS_PROGRAMAS
	ADD CONSTRAINT PK_MODULOS_PROGRAMAS PRIMARY KEY(COD_MODULO_PROGRAMA);

ALTER TABLE MODULOS_PROGRAMAS
	ADD CONSTRAINT FK_MODULOS_PROGRAMAS_COD_PROGRAMA FOREIGN KEY (COD_PROGRAMA) REFERENCES PROGRAMAS(COD_PROGRAMA)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

ALTER TABLE MODULOS_PROGRAMAS
	ADD CONSTRAINT FK_MODULOS_PROGRAMAS_COD_MODULO FOREIGN KEY (COD_MODULO) REFERENCES MODULOS(COD_MODULO)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

ALTER TABLE MODULOS_PROGRAMAS
	ADD CONSTRAINT FK_MODULOS_PROGRAMAS_REQUISITO FOREIGN KEY (COD_MODULO) REFERENCES MODULOS(COD_MODULO)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;


CREATE TABLE MATRICULAS(
COD_MATRICULA int IDENTITY (1,1),
ID_ESTUDIANTE varchar(9) NOT NULL,
FECHA_MATRICULA date CONSTRAINT DF_FECHA_MATRICULA DEFAULT getdate() NULL,
TIPO_PAGO varchar(20) CONSTRAINT DF_TIPO_PAGO DEFAULT 'EFECTIVO' NULL,
ESTADO_FACTURA varchar(3) CONSTRAINT DF_ESTADO_FACTURA DEFAULT 'PEN' NULL,
ESTADO_MATRICULA varchar(3) CONSTRAINT DF_ESTADO_MATRICULA DEFAULT 'ACT' NULL,
TOTAL_MATRICULA decimal(10,2) NOT NULL,
TOTAL_PAGADO decimal(10,2) NOT NULL
);
--RESTRICCIONES MATRICULAS
ALTER TABLE MATRICULAS
	ADD CONSTRAINT PK_MATRICULAS PRIMARY KEY (COD_MATRICULA);

ALTER TABLE MATRICULAS
	ADD CONSTRAINT FK_MATRICULAS_ID_ESTUDIANTE FOREIGN KEY (ID_ESTUDIANTE) REFERENCES ESTUDIANTES(ID_ESTUDIANTE)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

ALTER TABLE MATRICULAS
	ADD CONSTRAINT CK_ESTADO_MATRICULA CHECK(ESTADO_MATRICULA IN ('ACT','INA') AND ESTADO_MATRICULA = upper(ESTADO_MATRICULA));



ALTER TABLE MATRICULAS
	ADD CONSTRAINT CK_TIPO_PAGO CHECK(TIPO_PAGO IN ('EFECTIVO','TARGETA','TRANSFERENCIA','SIMPE','OTRO') AND TIPO_PAGO = upper(TIPO_PAGO));

ALTER TABLE MATRICULAS
	ADD CONSTRAINT CK_ESTADO_FACTURA CHECK(ESTADO_FACTURA IN ('PEN','CAN','ANU') AND ESTADO_FACTURA = upper(ESTADO_FACTURA));


CREATE TABLE MODULOS_ABIERTOS(
COD_MODULO_ABIERTO int IDENTITY (1,1),
ID_PROFESOR varchar(9) NULL,
COD_MODULO_PROGRAMA int NOT NULL,
GRUPO smallint CONSTRAINT DF_GRUPO DEFAULT 1 NULL,
FECHA_INICIO date NOT NULL,
FECHA_FIN date NULL,
ESTADO varchar(3) CONSTRAINT DF_MODULOS_ABIERTOS_ESTADO DEFAULT 'ACT' NULL
);

--RESTRICCIONES MODULOS_ABIERTOS
ALTER TABLE MODULOS_ABIERTOS
	ADD CONSTRAINT PK_MODULOS_ABIERTOS PRIMARY KEY (COD_MODULO_ABIERTO);

ALTER TABLE MODULOS_ABIERTOS
	ADD CONSTRAINT FK_MODULOS_ABIERTOS_ID_PROFESOR FOREIGN KEY (ID_PROFESOR) REFERENCES PROFESORES(ID_PROFESOR)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

ALTER TABLE MODULOS_ABIERTOS
	ADD CONSTRAINT FK_MODULOS_ABIERTOS_COD_MODULO_PROGRAMA FOREIGN KEY (COD_MODULO_PROGRAMA) REFERENCES MODULOS_PROGRAMAS(COD_MODULO_PROGRAMA)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

ALTER TABLE MODULOS_ABIERTOS
	ADD CONSTRAINT CK_MODULOS_ABIERTOS_ESTADO CHECK(ESTADO IN ('ACT','INA') AND ESTADO = upper(ESTADO));


CREATE TABLE HORARIOS(
COD_MODULO_ABIERTO int NOT NULL,
DIA varchar(1)NOT NULL,
HORA_INICIO time NOT NULL,
HORA_FIN time NOT NULL,
);
--DROP TABLE HORARIOS

--RESTRICCIONES HORARIOS
ALTER TABLE HORARIOS
	ADD CONSTRAINT PK_HORARIOS PRIMARY KEY(COD_MODULO_ABIERTO,DIA,HORA_INICIO,HORA_FIN);

ALTER TABLE HORARIOS
	ADD CONSTRAINT FK_HORARIOS_COD_MODULO_ABIERTO FOREIGN KEY (COD_MODULO_ABIERTO) REFERENCES MODULOS_ABIERTOS(COD_MODULO_ABIERTO)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

ALTER TABLE HORARIOS
	ADD CONSTRAINT CK_DIA CHECK(DIA IN ('L', 'K', 'M', 'J', 'V') AND DIA = upper(DIA));


CREATE TABLE LABORATORIOS(
COD_LABORATORIO int IDENTITY (1,1),
LABORATORIO_NUMERO int NOT NULL,
COD_MODULO_ABIERTO int NOT NULL
);

--RESTRICCIONES LABORATORIOS
ALTER TABLE LABORATORIOS
	ADD CONSTRAINT PK_LABORATORIOS PRIMARY KEY(COD_LABORATORIO);

ALTER TABLE LABORATORIOS
	ADD CONSTRAINT FK_LABORATORIOS_COD_MODULO_ABIERTO FOREIGN KEY (COD_MODULO_ABIERTO) REFERENCES MODULOS_ABIERTOS(COD_MODULO_ABIERTO)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

ALTER TABLE LABORATORIOS
	ADD CONSTRAINT CK_LABORATORIO_NUMERO CHECK(LABORATORIO_NUMERO>0 AND LABORATORIO_NUMERO<6)


CREATE TABLE DETALLES_MATRICULAS(
COD_DETALLE_MATRICULA int IDENTITY (1,1),
COD_MATRICULA int NOT NULL,
COD_MODULO_ABIERTO int NOT NULL ,
ESTADO_DETALLE varchar(3) CONSTRAINT DF_DETALLES_MATRICULAS_ESTADO_DETALLE DEFAULT 'MAT' NULL,
);
--DROP TABLE DETALLES_MATRICULAS

--RESTRICCIONES DETALLES_MATRICULAS
ALTER TABLE DETALLES_MATRICULAS
	ADD CONSTRAINT PK_DETALLES_MATRICULAS PRIMARY KEY(COD_DETALLE_MATRICULA);

ALTER TABLE DETALLES_MATRICULAS
	ADD CONSTRAINT FK_DETALLES_MATRICULAS_COD_MATRICULA FOREIGN KEY (COD_MATRICULA) REFERENCES MATRICULAS(COD_MATRICULA)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

ALTER TABLE DETALLES_MATRICULAS
	ADD CONSTRAINT FK_DETALLES_MATRICULAS_COD_MODULO_ABIERTO FOREIGN KEY (COD_MODULO_ABIERTO) REFERENCES MODULOS_ABIERTOS(COD_MODULO_ABIERTO)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

ALTER TABLE DETALLES_MATRICULAS
	ADD CONSTRAINT CK_DETALLES_MATRICULAS_ESTADO_DETALLE CHECK(ESTADO_DETALLE IN ('MAT','RET','DST','APR', 'REP') AND ESTADO_DETALLE = upper(ESTADO_DETALLE));


CREATE TABLE REGISTRO_NOTAS_ESTUDIANTES(
COD_NOTAS_ESTUDIANTE int IDENTITY (1,1),
COD_MODULO_ABIERTO int NOT NULL,
ID_ESTUDIANTE varchar(9) NOT NULL,
NOTA_ESTUDIANTE decimal(5,2) CONSTRAINT DF_NOTA_ESTUDIANTE DEFAULT 0 NULL,
ESTADO varchar(3) CONSTRAINT DF_REGISTRO_NOTAS_ESTUDIANTES_ESTADO DEFAULT 'REP' NULL
);
--RESTRICCIONES REGISTRO_NOTAS_ESTUDIANTES
ALTER TABLE REGISTRO_NOTAS_ESTUDIANTES
	ADD CONSTRAINT PK_REGISTRO_NOTAS_ESTUDIANTES PRIMARY KEY (COD_NOTAS_ESTUDIANTE);

ALTER TABLE REGISTRO_NOTAS_ESTUDIANTES
	ADD CONSTRAINT FK_REGISTRO_NOTAS_ESTUDIANTES_COD_MODULO_ABIERTO FOREIGN KEY (COD_MODULO_ABIERTO) REFERENCES MODULOS_ABIERTOS(COD_MODULO_ABIERTO)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

ALTER TABLE REGISTRO_NOTAS_ESTUDIANTES
	ADD CONSTRAINT FK_REGISTRO_NOTAS_ESTUDIANTES_ID_ESTUDIANTE FOREIGN KEY (ID_ESTUDIANTE) REFERENCES ESTUDIANTES(ID_ESTUDIANTE)
	ON DELETE NO ACTION
	ON UPDATE NO ACTION;

ALTER TABLE REGISTRO_NOTAS_ESTUDIANTES
	ADD CONSTRAINT CK_REGISTRO_NOTAS_ESTUDIANTES_ESTADO CHECK(ESTADO IN ('APR', 'REP') AND ESTADO = upper(ESTADO));

ALTER TABLE REGISTRO_NOTAS_ESTUDIANTES
	ADD CONSTRAINT CK_NOTA_ESTUDIANTE CHECK (NOTA_ESTUDIANTE>=0 AND NOTA_ESTUDIANTE<=100)


CREATE TABLE FERIADOS(
COD_FERIADO int IDENTITY(1,1),
NOMBRE_CELEBRACION varchar(30),
FECHA_CELEBRACION date NOT NULL
);
--RESTRICCIONES FERIADOS
ALTER TABLE FERIADOS
	ADD CONSTRAINT PK_FERIADOS_COD_FERIADO PRIMARY KEY (COD_FERIADO);
--DROP TABLE FERIADOS

--INSERCION DE DATOS

INSERT INTO ESTUDIANTES(ID_ESTUDIANTE,NOMBRE_ESTUDIANTE,APELLIDO1_ESTUDIANTE,APELLIDO2_ESTUDIANTE,PROVINCIA_ESTUDIANTE,CANTON_ESTUDIANTE,DISTRITO_ESTUDIANTE,CORREO_ESTUDIANTE,TELEFONO_ESTUDIANTE)
	VALUES('206730045','JOSE','CAMPOS','CHAVES','ALAJUELA','NARANJO','PALMITOS','JOSE@gmail.com','88888880'),
		  ('100000000','LUIS','CASTRO','ARROYO','ALAJUELA','NARANJO','PALMITOS','LUIS@gmail.com','88888881'),
		  ('110000000','FRANCISCO','ARGUEDAS','VARGAS','ALAJUELA','PALMARES','ZARAGOZA','FRANCISCO@gmail.com','88888882'),
		  ('111000000','DANNY','HURTADO','JIMENEZ','SAN JOSE','SAN JOSE','BARRIO ESCALANTE','DANNY@gmail.com','88888883'),
		  ('111100000','RICARDO','FERRETO','JIMENEZ','ALAJUELA','PALMARES','BUENOS AIRES','RICARDO@gmail.com','88888884'),
		  ('111110000','CRISTIAN','FONSECA','CALDERON','CARTAGO','TRES RIOS','TRES RIOS','CRISTIAN@gmail.com','88888885'),
		  ('111111000','CLAUDIO','JIMENES','CASTRO','ALAJUELA','PALMARES','LA GRANJA','CLAUDIO@gmail.com','88888886'),
		  ('111111100','HANZEL','RODRIGUEZ','ARIAS','GUANACASTE','LIBERIA','PAPAGAYO','HANZEL@gmail.com','88888887'),
		  ('111111110','DANIEL','PEREDA','CHAVARRIA','ALAJUELA','PALMARES','ZARAGOZA','DANIEL@gmail.com','88888888'),
		  ('111111111','CARLOS','ARAGON','ARAGON','SAN JOSE','SAN JOSE','DESAMPARADOS','CARLOS@gmail.com','88888889'),
		  ('211111111','SANDRA','QUESADA','ARAYA','ALAJUELA','GRECIA','SAN ROQUE','SANDRA@gmail.com','88888891');


SELECT *FROM ESTUDIANTES

INSERT INTO PROFESORES(ID_PROFESOR,NOMBRE_PROFESOR,APELLIDO1_PROFESOR,APELLIDO2_PROFESOR,CORREO_PROFESOR,TELFONO_PROFESOR)
	VALUES('200000000','ALONSO','BOGANTES','RODRIGUEZ','ALONSO@gmail.com','88888810'),
	      ('220000000','JESUS','HIDALGO','CASTRO','JESUS@gmail.com','88888811'),
		  ('222000000','ANDRES','SANCHEZ','CHAVARRIA','ANDRES@gmail.com','88888812'),
		  ('222200000','DEYMAR','MENA','GONZALEZ','DEYMAR@gmail.com','88888813'),
		  ('222220000','KENDALL','FERNANDEZ','ARIAS','KENDALL@gmail.com','88888814'),
		  ('222222000','EDWIN','CHAVARRIA','FONSECA','ENDWIN@gmail.com','88888815'),
		  ('222222200','PAMELA','MORA','MEJIA','PAMELA@gmail.com','88888816'),
		  ('222222220','PRISCILA','MORA','SIBAJA','PRINSCILA@gmail.com','88888817'),
		  ('222222222','NAHOMY','CASTRO','BOLAÑOS','NAHOMY@gmail.com','88888818'),
		  ('222222223','GERARDO','RODRIGUEZ','RUIZ','GERARDO@gmail.com','88888819');

SELECT*FROM PROFESORES

INSERT INTO CERTIFICACIONES_PROFESORES(ID_PROFESOR,NOMBRE_CERTIFICACION)
	VALUES('200000000','PROGRAMACION PARA ANDROID I'),
	      ('220000000','PROGRAMACION PARA ANDROID II'),
		  ('222000000','PROGRAMACION PARA ANDROID III'),
		  ('222222223','MTML'),
		  ('222200000','PROGRAMACION PARA APLICACIONES MIXTAS'),
		  ('222220000','LOGICA COMPUTACIONAL'),
		  ('222222000','INTRODUCCION A JAVA'),
		  ('222222200','PROGRAMACION ORIENTADA A OBJETOS'),
		  ('222222220','CSS'),
		  ('222222222','JAVASCRIPT');

SELECT*FROM CERTIFICACIONES_PROFESORES
--DELETE FROM CERTIFICACIONES_PROFESORES


INSERT INTO PROGRAMAS(NOMBRE_PROGRAMA)
	VALUES('PROGRAMACION DE DISPOSITIVOS MOVILES'),
	      ('PROGRAMACION DE SISTEMAS DE ESCRITORIO'),
		  ('PROGRAMACION DE PAGINAS WEB');
SELECT*FROM PROGRAMAS

INSERT INTO MODULOS(NOMBRE_MODULO,HORAS_TOTALES,COSTO)
	VALUES('PROGRAMACION PARA ANDROID I',120,250000),
		  ('PROGRAMACION PARA ANDROID II',110,240000),
		  ('PROGRAMACION PARA ANDROID III',100,220000),
		  ('PROGRAMACION PARA APLICACIONES MIXTAS',100,195000),
		  ('LOGICA COMPUTACIONAL',140,225000),
		  ('INTRODUCCION A JAVA',150,335000),
		  ('PROGRAMACION ORIENTADA A OBJETOS',160,345000),
		  ('MTML',90,185000),
		  ('CSS',60,175000),
		  ('JAVASCRIPT',70,180000),
		  ('BOOTSTRAP',90,185000),
		  ('NODE JS',90,185000);

SELECT*FROM MODULOS	

INSERT INTO MODULOS_PROGRAMAS(COD_PROGRAMA,COD_MODULO,REQUISITO)
	VALUES(1,1,NULL),
	      (1,2,1),
		  (1,3,2),
		  (1,4,3),
		  (2,5,NULL),
		  (2,6,5),
		  (2,7,6),
		  (3,8,NULL),
		  (3,9,8),
		  (3,10,9),
		  (3,11,10),
		  (3,12,11);

--DELETE FROM MODULOS_PROGRAMAS
SELECT*FROM MODULOS_PROGRAMAS

INSERT INTO MODULOS_ABIERTOS(COD_MODULO_PROGRAMA,ID_PROFESOR,FECHA_INICIO,FECHA_FIN,ESTADO)
	VALUES(1,'200000000','20230301','20230601','ACT'),
	      (2,'220000000','20230401','20230507','ACT'),
		  (3,'222000000','20230601','20230707','ACT'),
		  (4,'222200000','20230801','20230907','ACT'),
		  (5,'222220000','20231001','20231107','ACT'),
		  (6,'222222000','20231101','20231207','ACT'),
		  (7,'222222200','20230301','20230601','ACT'),
		  (8,'222222220','20230301','20230401','ACT'),
		  (9,'222222222','20230501','20230601','INA'),
		  (10,'222222223','20230701','20230801','ACT');



SELECT*FROM MODULOS_ABIERTOS
--DELETE FROM MODULOS_ABIERTOS

INSERT INTO LABORATORIOS(COD_MODULO_ABIERTO,LABORATORIO_NUMERO)
	VALUES(1,1),
		  (2,2),
		  (3,3),
		  (4,4),
		  (5,5),
		  (6,1),
		  (7,2),
		  (8,3),
		  (9,4),
		  (10,5);

--DELETE FROM LABORATORIOS		  
SELECT*FROM LABORATORIOS

INSERT INTO HORARIOS(COD_MODULO_ABIERTO,DIA,HORA_INICIO,HORA_FIN)
	VALUES(1,'L','07:00:00','12:00:00'),
		  (2,'L','13:00:00','18:00:00'),
		  (3,'K','07:00:00','12:00:00'),
		  (4,'K','13:00:00','18:00:00'),
		  (5,'M','07:00:00','12:00:00'),
		  (6,'M','13:00:00','18:00:00'),
		  (7,'J','07:00:00','12:00:00'),
		  (8,'J','13:00:00','18:00:00'),
		  (9,'V','07:00:00','12:00:00'),
		  (10,'L','11:00:00','16:00:00');
		 


	

--DELETE FROM HORARIOS
SELECT*FROM HORARIOS

INSERT INTO REGISTRO_NOTAS_ESTUDIANTES(COD_MODULO_ABIERTO,ID_ESTUDIANTE,NOTA_ESTUDIANTE,ESTADO)
	VALUES(1,'206730045',60,'REP'),
		  (1,'100000000',80,'APR'),
		  (1,'110000000',50,'REP'),
		  (1,'111000000',70,'APR'),
		  (1,'111100000',50,'REP'),
		  (1,'111110000',100,'APR'),
		  (1,'111111000',90,'APR'),
		  (1,'111111100',60,'REP'),
		  (1,'111111110',80,'APR'),
		  (1,'111111111',85,'APR');
		  


--DELETE FROM REGISTRO_NOTAS_ESTUDIANTES
SELECT*FROM REGISTRO_NOTAS_ESTUDIANTES


INSERT INTO MATRICULAS(ID_ESTUDIANTE,TOTAL_MATRICULA,TOTAL_PAGADO,ESTADO_FACTURA)
	VALUES('206730045',250000,200000,'CAN'),
		  ('100000000',250000,250000,'CAN'),
		  ('110000000',250000,250000,'CAN'),
		  ('111000000',250000,250000,'CAN'),
		  ('111100000',250000,250000,'CAN'),
		  ('111110000',250000,250000,'CAN'),
		  ('111111000',250000,250000,'CAN'),
		  ('111111100',250000,250000,'CAN'),
		  ('111111110',250000,250000,'CAN'),
		  ('111111111',250000,250000,'PEN');

--DELETE FROM MATRICULAS
SELECT*FROM MATRICULAS


INSERT INTO DETALLES_MATRICULAS(COD_MATRICULA,COD_MODULO_ABIERTO)
	VALUES(1,1),
		  (2,1),
		  (3,1),
		  (4,1),
		  (5,1),
		  (6,1),
		  (7,1),
		  (8,1),
		  (9,1),
		  (10,1);

SELECT*FROM DETALLES_MATRICULAS
--DELETE FROM DETALLES_MATRICULAS

INSERT INTO FERIADOS(FECHA_CELEBRACION,NOMBRE_CELEBRACION)
	VALUES('20230101','ANIO NUEVO'),		  
		  ('20230406','JUEVES SANTO'),
		  ('20230407','VIERNES SANTO'),
		  ('20230410','BATALLA DE RIVAS'),
		  ('20230501','DIA DEL TRABAJADOR'),
		  ('20230724','ANEXION GUANACASTE'),
		  ('20230802','VIRGEN DE LOS ANGELES'),
		  ('20230814','DIA DE LAS MADRES'),
		  ('20230831','ENCUENTRO DE CULTURAS'),
		  ('20230915','DIA DE LA INDEPENDENCIA'),
		  ('20231201','ABOLICION DEL EJERCITO'),
		  ('20231225','NAVIDAD');


SELECT*FROM FERIADOS
--DELETE FROM FERIADOS






----6 CONSULTAS SIMPLES 

--SELECT E.ID_ESTUDIANTE,NOMBRE_ESTUDIANTE,APELLIDO1_ESTUDIANTE,APELLIDO2_ESTUDIANTE,COD_MATRICULA
--FROM ESTUDIANTES E INNER JOIN MATRICULAS M
--ON E.ID_ESTUDIANTE = M.ID_ESTUDIANTE
--WHERE COD_MATRICULA IS NOT NULL

--SELECT  P.ID_PROFESOR,NOMBRE_PROFESOR,APELLIDO1_PROFESOR,APELLIDO2_PROFESOR,NOMBRE_CERTIFICACION
--FROM PROFESORES P FULL JOIN CERTIFICACIONES_PROFESORES CP
--ON P.ID_PROFESOR = CP.ID_PROFESOR
--WHERE NOMBRE_CERTIFICACION IS NOT NULL

--SELECT E.ID_ESTUDIANTE,NOMBRE_ESTUDIANTE,APELLIDO1_ESTUDIANTE,APELLIDO2_ESTUDIANTE,NOTA_ESTUDIANTE,ESTADO
--FROM ESTUDIANTES E INNER JOIN REGISTRO_NOTAS_ESTUDIANTES RNE
--ON E.ID_ESTUDIANTE = RNE.ID_ESTUDIANTE
--WHERE ESTADO = 'REP'

--SELECT P.COD_PROGRAMA,P.NOMBRE_PROGRAMA,M.COD_MODULO,NOMBRE_MODULO,COSTO
--FROM MODULOS M INNER JOIN MODULOS_PROGRAMAS MP
--ON M.COD_MODULO = MP.COD_MODULO
--INNER JOIN PROGRAMAS P
--ON MP.COD_PROGRAMA = P.COD_PROGRAMA
--WHERE COSTO < 190000

--SELECT MP.COD_MODULO_PROGRAMA,COD_MODULO_ABIERTO
--FROM MODULOS_PROGRAMAS MP LEFT JOIN MODULOS_ABIERTOS MA
--ON MP.COD_MODULO_PROGRAMA = MA.COD_MODULO_PROGRAMA
--WHERE COD_MODULO_ABIERTO IS NULL


--SELECT COD_MODULO_ABIERTO,MP.COD_MODULO_PROGRAMA
--FROM MODULOS_ABIERTOS MA RIGHT JOIN MODULOS_PROGRAMAS MP
--ON MA.COD_MODULO_PROGRAMA = MP.COD_MODULO_PROGRAMA
--WHERE MA.COD_MODULO_PROGRAMA IS NOT NULL


----8 CONSULTAS GROUP BY - HAVING
--SELECT COUNT(ID_ESTUDIANTE) AS CANTIDAD_DE_ESTUDIANTES ,PROVINCIA_ESTUDIANTE
--FROM ESTUDIANTES 
--GROUP BY PROVINCIA_ESTUDIANTE

--SELECT COUNT(ID_ESTUDIANTE) AS CANTIDAD_DE_ESTUDIANTES ,CANTON_ESTUDIANTE
--FROM ESTUDIANTES
--WHERE CANTON_ESTUDIANTE IN ('PALMARES','NARANJO')
--GROUP BY CANTON_ESTUDIANTE

--SELECT COUNT(ID_PROFESOR) AS CANTIDAD_DE_DOCENTES ,APELLIDO1_PROFESOR
--FROM PROFESORES 
--WHERE APELLIDO1_PROFESOR LIKE 'M%'
--GROUP BY APELLIDO1_PROFESOR

--SELECT COUNT(COD_HORARIO) AS POR_DIA ,DIA
--FROM HORARIOS
--WHERE DIA = 'L'
--GROUP BY DIA

--SELECT COUNT(COD_MODULO) AS MISMAS_HORAS_EN_MODULOS , HORAS_TOTALES
--FROM MODULOS
--WHERE HORAS_TOTALES BETWEEN 70 AND 100
--GROUP BY HORAS_TOTALES

--SELECT COUNT(ID_ESTUDIANTE) AS CANTIDAD_ESTUDIANTES,NOMBRE_ESTUDIANTE
--FROM ESTUDIANTES
--WHERE NOMBRE_ESTUDIANTE LIKE '%A'
--GROUP BY NOMBRE_ESTUDIANTE


--SELECT COUNT(ID_ESTUDIANTE) AS NOTA,NOTA_ESTUDIANTE
--FROM REGISTRO_NOTAS_ESTUDIANTES
--GROUP BY NOTA_ESTUDIANTE 
--HAVING NOTA_ESTUDIANTE>=70


----muestra los estudiantes que no estan aprovados
--SELECT ID_ESTUDIANTE,AVG(NOTA_ESTUDIANTE) AS SUMA
--FROM REGISTRO_NOTAS_ESTUDIANTES
--GROUP BY ID_ESTUDIANTE
--HAVING AVG(NOTA_ESTUDIANTE)<70


----2 CONSULTAS ORDENANDO DATOS
--SELECT NOTA_ESTUDIANTE 
--FROM  REGISTRO_NOTAS_ESTUDIANTES
--ORDER BY NOTA_ESTUDIANTE DESC

--SELECT NOMBRE_MODULO,COSTO
--FROM MODULOS
--ORDER BY COSTO ASC

----2 CONSULTAS CON UNION O SUBSULTAS
--SELECT * 
--FROM REGISTRO_NOTAS_ESTUDIANTES
--WHERE COD_MODULO_ABIERTO IN (SELECT COD_MODULO_ABIERTO FROM MODULOS_ABIERTOS WHERE ESTADO ='ACT') 

--SELECT NOMBRE_ESTUDIANTE
--FROM ESTUDIANTES 
--UNION 
--SELECT NOMBRE_PROFESOR
--FROM PROFESORES 
--ORDER BY 1 

----2 CONSULTAS A GUSTO PROPIO

--SELECT E.ID_ESTUDIANTE,NOMBRE_ESTUDIANTE,APELLIDO1_ESTUDIANTE,APELLIDO2_ESTUDIANTE,MA.COD_MODULO_ABIERTO,NOMBRE_PROGRAMA
--FROM ESTUDIANTES E INNER JOIN MATRICULAS M
--ON E.ID_ESTUDIANTE=M.ID_ESTUDIANTE
--INNER JOIN DETALLES_MATRICULAS DM
--ON M.COD_MATRICULA=DM.COD_MATRICULA
--INNER JOIN MODULOS_ABIERTOS MA
--ON DM.COD_MODULO_ABIERTO=MA.COD_MODULO_ABIERTO
--INNER JOIN MODULOS_PROGRAMAS MP
--ON MA.COD_MODULO_PROGRAMA=MP.COD_MODULO_PROGRAMA
--INNER JOIN PROGRAMAS P
--ON MP.COD_PROGRAMA=P.COD_PROGRAMA


--SELECT TELEFONO_ESTUDIANTE,NOMBRE_ESTUDIANTE,APELLIDO1_ESTUDIANTE,APELLIDO2_ESTUDIANTE
--FROM ESTUDIANTES
--ORDER BY TELEFONO_ESTUDIANTE ASC


--SELECT*FROM ESTUDIANTES



